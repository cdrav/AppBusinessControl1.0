<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nueva Venta - Business Control</title>
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  <div class="page-wrapper">
    <div class="content-container">
      <div class="container">
        <div class="form-container fade-in" style="max-width: 800px; margin: 0 auto;">
          <div class="form-header mb-4">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="form-title mb-0"><i class="bi bi-cart-plus me-2"></i>Nueva Venta</h1>
                    <p class="text-muted">Registrar transacción</p>
                </div>
                <a href="ventas.html" class="btn-back"><i class="bi bi-arrow-left"></i> Cancelar</a>
            </div>
          </div>
          
          <form id="addSaleForm">
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <label for="clientId" class="form-label">Cliente</label>
                    <select class="form-control" id="clientId" required>
                        <option value="">Seleccionar cliente...</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="saleDate" class="form-label">Fecha</label>
                    <input type="date" class="form-control" id="saleDate" required>
                </div>
            </div>

            <div class="card bg-light border-0 mb-4">
                <div class="card-body">
                    <h5 class="card-title mb-3">Productos</h5>
                    <div id="productsContainer">
                        <!-- Items dinámicos -->
                        <div class="product-item mb-3">
                            <div class="d-flex gap-2 align-items-end">
                                <div class="flex-grow-1">
                                    <select class="form-control product-select" required>
                                        <option value="">Selecciona un producto</option>
                                    </select>
                                </div>
                                <div style="width: 100px;">
                                    <input type="number" class="form-control quantity-input" placeholder="Cant." min="1" required>
                                </div>
                                <div class="text-end" style="width: 80px;">
                                    <span class="product-price fw-bold">$0.00</span>
                                </div>
                                <button type="button" class="btn btn-outline-danger remove-product"><i class="bi bi-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addProductField()">
                        <i class="bi bi-plus-circle"></i> Agregar otro producto
                    </button>
                </div>
            </div>

            <div class="d-flex justify-content-end mb-4">
                <div class="text-end">
                    <p class="mb-1">Subtotal: <span id="subtotal" class="fw-bold">$0.00</span></p>
                    <p class="mb-1 text-muted">IVA (16%): <span id="tax">$0.00</span></p>
                    <h4 class="fw-bold text-primary">Total: <span id="total">$0.00</span></h4>
                </div>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg btn-submit">
                    <i class="bi bi-check-circle me-2"></i> Completar Venta
                </button>
            </div>
            <div id="message" class="mt-3"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="js/addSale.js"></script>
  <footer class="main-footer"><p class="mb-0">&copy; 2026 Business Control.</p></footer>
</body>
</html>